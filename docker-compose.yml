version: '3'

services:
  rcon-panel:
    build: .
    container_name: minecraft-rcon-panel
    environment:
      - CONTAINER_NAME=${CONTAINER_NAME}
      - SERVER_HOST=${SERVER_HOST}
      - SSH_HOST=${SSH_HOST}
      - SSH_USER=${SSH_USER}
      - ADMIN_USER=${ADMIN_USER}
      - ADMIN_PASS=${ADMIN_PASS}
      - SECRET_KEY=${SECRET_KEY}
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - ~/.ssh/minecraft_panel_rsa:/root/.ssh/minecraft_panel_rsa:ro
      - ~/.ssh/minecraft_panel_rsa.pub:/root/.ssh/minecraft_panel_rsa.pub:ro
      - ./data:/app/data
      - ./templates:/app/templates
      - ./static:/app/static
      - ./app.py:/app/app.py
      - ./bedrock_remote.py:/app/bedrock_remote.py
      - ./scheduler.py:/app/scheduler.py
    ports:
      - "41114:5000"
    restart: unless-stopped